(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{787:function(t,e,a){"use strict";a.r(e);var n=a(4),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("本文主要介绍了远程加载vue组件，支持远程es6降级，支持scss语法，具有一定的参考价值，需要的朋友可以参考下。")])]),t._v(" "),a("h2",{attrs:{id:"调研"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调研"}},[t._v("#")]),t._v(" 调研")]),t._v(" "),a("p",[t._v("最近在公司遇到一个业务需要远程加载vue组件，通过调研，我找到了一个组件 "),a("strong",[a("a",{attrs:{href:"https://github.com/FranckFreiburger/http-vue-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("http-vue-loader"),a("OutboundLink")],1)]),t._v("，但是发现这个组件有一些问题：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("不支持在线es6语法降级")])]),t._v(" "),a("li",[a("p",[t._v("不支持scss语法")])]),t._v(" "),a("li",[a("p",[t._v("script中只能写成 modules.export 不能写成 export default")])])]),t._v(" "),a("h2",{attrs:{id:"组件改造和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件改造和使用"}},[t._v("#")]),t._v(" 组件改造和使用")]),t._v(" "),a("p",[t._v("上述的组件已经三年没做修改，所以基本趋于稳定，故修改了源码并做成依赖包 "),a("strong",[a("a",{attrs:{href:"https://github.com/HunterXing/remote-vue2-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("remote-vue2-loader"),a("OutboundLink")],1)]),t._v("，解决上述问题")]),t._v(" "),a("p",[t._v("https://www.npmjs.com/package/remote-vue2-loader")]),t._v(" "),a("p",[t._v("使用方式：")]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("remoteComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nimport remoteVueLoader from 'remote-vue2-loader'\nexport default {\n  data () {\n    return {\n      remoteComponent: null\n    }\n  },\n  created () {\n    this.getRemoteComponent()\n  },\n  methods: {\n    // 尝试渲染远程文件或远程字符串\n    async getRemoteComponent() {\n      // 情况1. 直接从从远程服务器加载组件\n      this.remoteComponent = remoteVueLoader('127.0.0.1/testA.vue')\n      \n      // 情况2. 如果接口是post等其他类型接口，或者需要添加参数，也可以这么写\n      axios.get('http://127.0.0.1/testA.vue', {\n        params: {\n          p1: 'xxx',\n          p2: 'xxx'\n        }\n      }).then(res => {\n        this.remoteComponent = remoteVueLoader('data:text/plain,' + encodeURIComponent(res.data))\n      })\n    }\n  }\n}\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);