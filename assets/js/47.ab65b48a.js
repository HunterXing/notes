(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{628:function(t,a,s){t.exports=s.p+"assets/img/image-20220114141204568.6f5822c4.png"},816:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"创建-application-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-application-yml"}},[t._v("#")]),t._v(" 创建 application.yml")]),t._v(" "),e("p",[t._v(".yml配置文件的格式比.properties格式的配置文件更为清晰，今天来学习这个。首先我们可以删除之前的 application.properties文件了，改用下面的文件。")]),t._v(" "),e("p",[e("code",[t._v("application.yml")])]),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工程访问设置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("servlet")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context-path")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /test\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#spring环境配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("profiles")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行环境 dev|prd,根据active动态加载application-active.yml配置文件")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("active")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dev\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#分页插件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pagehelper")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("helper-dialect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("reasonable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("support-methods-arguments")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("params")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" count=countSql\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#mybatis插件配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mybatis")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mapper-locations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" classpath"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mapper/"),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Mapper.xml")]),t._v("\n")])])]),e("h2",{attrs:{id:"再创建两个不同环境的文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#再创建两个不同环境的文件"}},[t._v("#")]),t._v(" 再创建两个不同环境的文件")]),t._v(" "),e("p",[t._v("application-dev.yml\napplication-prd.yml")]),t._v(" "),e("p",[e("code",[t._v("application-dev.yml")])]),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("datasource")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" spring"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("boot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vue3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("datasource\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.cj.jdbc.Driver\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3306/db_test"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("useUnicode=true"),e("span",{pre:!0,attrs:{class:"token important"}},[t._v("&serverTimezone=Asia/Shanghai&characterEncoding=utf8&autoReconnect=true&useSSL=false&allowMultiQueries=true&useAffectedRows=true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])]),e("p",[t._v("application-prd.yml 文件同理，只是配置内容不一样")]),t._v(" "),e("p",[e("img",{attrs:{src:s(628),alt:"image-20220114141204568"}})]),t._v(" "),e("h2",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),e("p",[t._v("当我们部署到开发环境的时候，记得将 spring.profiles.active 的值改成 prd即可")]),t._v(" "),e("h2",{attrs:{id:"使用maven插件自动判断环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用maven插件自动判断环境"}},[t._v("#")]),t._v(" 使用maven插件自动判断环境")]),t._v(" "),e("p",[t._v("有时候我们部署时还是忘记修改active的值，这时候我们可以使用maven插件，自动的更新不同环境的配置文件。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://fhxisdog.github.io/posts/spring-boot-%E5%88%86%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot 分环境打包"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);